{% extends 'posts/base.html' %}

{% block title %}FaGo | {{ user.username }}{% endblock %}

{% block content %}
<main class="container">
    <section class="profile-card">
        <header class="profile-header">
            <img src="{{ user.userprofile.profile_picture.url }}" alt="Profile Picture" class="profile-pic">
            <div class="profile-info">
                <h1>{{ user.first_name }}</h1>
                <p class="username">@{{ user.username }}</p>
                <p class="email">{{ user.email }}</p>
                <p class="bio">{{ user.userprofile.profile_bio }}</p>
                <a href="{% url 'edit-profile' %}" class="btn btn-primary">Edit Profile</a>
            </div>
        </header>
    </section>

    <section class="profile-content">
        <div class="user-posts">
            <h2>User's Posts</h2>
            {% if user_posts %}
                <div class="posts-grid">
                    {% for post in user_posts %}
                    <article class="post-card">
                        <h3>{{ post.title }}</h3>
                        <p>{{ post.content|slice:150 }}...
                            <a href="{% url 'read-post' post.id %}" class="read-more">Read More</a>
                        </p>
                        <a href="{% url 'delete-post' post.id %}" class="btn btn-danger">Delete</a>
                    </article>
                    {% endfor %}
                </div>
            {% else %}
                <p class="no-posts-message">You have not posted anything yet</p>
                <a href="{% url 'create-post' %}" class="btn btn-success">Post Something</a>
            {% endif %}
        </div>

        <div class="user-communities">
            <h2>Communities</h2>
            {% if user_communities %}
                <div class="communities-grid">
                    {% for community in user_communities %}
                    <article class="community-card">
                        <h3>{{ community.name }}</h3>
                        <p>{{ community.description }}</p>
                        <div class="community-actions">
                            <a href="{% url 'leave-community' community.name %}" class="btn btn-warning">Leave Community</a>
                            {% if user == community.owner %}
                            <a href="{% url 'delete-community' community.name %}" class="btn btn-danger">Delete</a>
                            {% endif %}
                        </div>
                    </article>
                    {% endfor %}
                </div>
            {% else %}
                <a href="{% url 'explore-communities' %}" class="btn btn-info">Find Communities</a>
            {% endif %}
        </div>
    </section>
</main>

<style>
    /* Main container styling */
.container {
    max-width: 1000px;
    margin: 0 auto;
    padding: 20px;
}

/* Profile card styling */
.profile-card {
    background-color: #ffffff;
    border: 1px solid #e0e0e0;
    border-radius: 12px;
    display: flex;
    align-items: center;
    padding: 20px;
    margin-bottom: 20px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

/* Profile picture styling */
.profile-pic {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    object-fit: cover;
    margin-right: 20px;
    border: 2px solid #ddd;
}

/* Profile information styling */
.profile-info {
    flex: 1;
}

.profile-info h1 {
    margin: 0;
    font-size: 1.8em;
    color: #333;
}

.username {
    color: #555;
    font-size: 1em;
}

.email {
    font-size: 0.9em;
    color: #777;
}

.bio {
    margin-top: 10px;
    color: #555;
}

.btn {
    display: inline-block;
    margin-top: 10px;
    padding: 8px 12px;
    border: none;
    border-radius: 4px;
    text-decoration: none;
    font-size: 0.9em;
}

.btn-primary {
    background-color: #007bff;
    color: #fff;
}

.btn-danger {
    background-color: #dc3545;
    color: #fff;
}

.btn-success {
    background-color: #28a745;
    color: #fff;
}

.btn-warning {
    background-color: #ffc107;
    color: #212529;
}

.btn-info {
    background-color: #17a2b8;
    color: #fff;
}

/* User posts and communities styling */
.posts-grid, .communities-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin-top: 20px;
}

.post-card, .community-card {
    background-color: #f9f9f9;
    border: 1px solid #ddd;
    border-radius: 8px;
    padding: 15px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

.post-card h3, .community-card h3 {
    margin-top: 0;
    font-size: 1.2em;
}

.read-more {
    color: #007bff;
    text-decoration: none;
    font-weight: bold;
}

.read-more:hover {
    text-decoration: underline;
}

.community-actions {
    margin-top: 10px;
}
</style>
{% endblock %}
